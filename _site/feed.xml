<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>زندگی خوره‌ای</title>
    <description>آموزش، نقد و بررسی، معرفی و ...
</description>
    <link>http://mamins1376.github.io//weblog/</link>
    <atom:link href="http://mamins1376.github.io//weblog/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sun, 17 May 2015 17:08:45 +0430</pubDate>
    <lastBuildDate>Sun, 17 May 2015 17:08:45 +0430</lastBuildDate>
    <generator>Jekyll v2.2.0</generator>
    <language>fa-IR</language>
    
      <item>
        <title>کانفیگ tor و privoxy مثل آب خوردن</title>
        <description>
          
            &lt;p&gt;به مناسبت &lt;a href=&quot;https://en.wikipedia.org/wiki/World_Information_Society_Day&quot;&gt;روز جهانی جامعه‌ی اطلاعاتی&lt;/a&gt;، از تور و لطف بزرگی که در حق ما می‌کنه و کانفیگش به همراه دوست عزیزش، privoxy می‌نویسم. چند وقتیه تور خوب وصل نمی‌شه (البته بیچاره تقصیر خودش نیست) ولی خب هر مشکلی راه حلی داره! privoxy هم کمکمون می‌کنه تا علاوه بر فیلتر تبلیغات، یه پروکسی http خوب از تور درست کنیم.

          ...
        </description>
        <pubDate>Sun, 17 May 2015 22:05:13 +0430</pubDate>
        <link>http://mamins1376.github.io//weblog/2015/05/tor-privoxy</link>
        <guid isPermaLink="true">http://mamins1376.github.io//weblog/2015/05/tor-privoxy</guid>
        
        
        <category>openvpn</category>
        
        <category>network</category>
        
        <category>manager</category>
        
        <content>
        <p>به مناسبت <a href="https://en.wikipedia.org/wiki/World_Information_Society_Day">روز جهانی جامعه‌ی اطلاعاتی</a>، از تور و لطف بزرگی که در حق ما می‌کنه و کانفیگش به همراه دوست عزیزش، privoxy می‌نویسم. چند وقتیه تور خوب وصل نمی‌شه (البته بیچاره تقصیر خودش نیست) ولی خب هر مشکلی راه حلی داره! privoxy هم کمکمون می‌کنه تا علاوه بر فیلتر تبلیغات، یه پروکسی http خوب از تور درست کنیم.
<!-- ادامه --></p>

<h4 id="obfsproxy">۱. نصب تور، پریواکسی و obfsproxy</h4>
<p>هر سه‌تا توی مخازن رسمی موجودن:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get install tor obfsproxy privoxy</code></pre></div>

<h4 id="section">۲. کانفیگ تور</h4>
<p>قبل از این که فایل کانفیگ رو دستکاری کنیم، به تعدادی پل احتیاج داریم؛ obfsproxy موجود در مخزن رسمی فعلا فقط از obfs2 پشتیبانی می‌کنه وگرنه obfs4 توصیه می‌شه. روش خوب برای گرفتن پل‌ها <a href="&#109;&#097;&#105;&#108;&#116;&#111;:&#098;&#114;&#105;&#100;&#103;&#101;&#115;&#064;&#116;&#111;&#114;&#112;&#114;&#111;&#106;&#101;&#099;&#116;&#046;&#111;&#114;&#103;">فرستادن یک ایمیل به تور</a> بدون عنوان با محتوای زیره:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">get transport obfs2</code></pre></div>

<p><strong>توجه!</strong> فعلا فقط ایمیل از سرویس‌های یاهو، جیمیل و Riseup قابل قبول هستن.<br />
در پاسخ یک ایمیل حاوی آدرس پل‌ها دریافت می‌کنین. در دستور زیر، به جای عبارت <transport> یکی از پل‌هایی رو که دریافت کردین رو قرار بدین.</transport></p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# cat &lt;&lt; <span class="s2">&quot;EOF&quot;</span> &gt;&gt; /etc/tor/torrc
UseBridges 1
<span class="c"># e.g. Bridge obfs2 123.45.67.89:1011 UI373R...9238F98</span>
Bridge &lt;TRANSPORT&gt;
ClientTransportPlugin obfs2 <span class="nb">exec</span> /usr/bin/obfsproxy --managed
EOF
root@debian:~# service tor restart</code></pre></div>

<h4 id="section-1">۳. کانفیگ پریواکسی</h4>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# cat &lt;&lt; <span class="s2">&quot;EOF&quot;</span> &gt;&gt; /etc/privoxy/config
forward-socks5   /    127.0.0.1:9050 .
forward              192.168.*.*/  .
forward   10.*.*.*/  .
forward   127.*.*.*/  .
forward   localhost/  .
EOF
root@debian:~# service tor restart</code></pre></div>

<h4 id="section-2">۴. سلام کردن به اینترنت</h4>
<p>لاگ خود تور رو می‌شه با دستور زیر مانیتور کرد:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# tail -f /var/log/tor/log</code></pre></div>

<p>پریواکسی روی پورت 8118 با پروتکل‌های http، https و ftp آماده‌ی هدایت شما به اینترنته!</p>


        </content>
      </item>
    
      <item>
        <title>دانلود شبانه برای Steam</title>
        <description>
          
            &lt;p&gt;بزرگ‌ترین مشکل من با استیم، دانلود بازی‌هاش بود چون حجم خیلی خیلی زیادی دارن. ساعت دانلود رایگان داشتم ولی باید دستی دانلود رو شروع می‌کردم. خب شروع کردم به جستجو و تحقیق که به این روش رسیدم؛ این‌طوری میشه هر برنامه‌ای رو با استیم به راحتی دانلود کرد.

          ...
        </description>
        <pubDate>Tue, 12 May 2015 01:07:40 +0430</pubDate>
        <link>http://mamins1376.github.io//weblog/2015/05/steam-download</link>
        <guid isPermaLink="true">http://mamins1376.github.io//weblog/2015/05/steam-download</guid>
        
        
        <category>steam</category>
        
        <category>download</category>
        
        <category>linux</category>
        
        <content>
        <p>بزرگ‌ترین مشکل من با استیم، دانلود بازی‌هاش بود چون حجم خیلی خیلی زیادی دارن. ساعت دانلود رایگان داشتم ولی باید دستی دانلود رو شروع می‌کردم. خب شروع کردم به جستجو و تحقیق که به این روش رسیدم؛ این‌طوری میشه هر برنامه‌ای رو با استیم به راحتی دانلود کرد.
<!-- ادامه --></p>

<p>من برای اجرای فرمان‌ها در ساعات مقرر از <code>cron</code> استفاده می‌کنم. وقتی که cron دستوری رو اجرا می‌کنه، خیلی از متغییرهای رایج از جمله <code>DISPLAY</code> ست نمی‌شن و اگر دستور داده‌شده نیازمند سیستم گرافیکی باشه با خطا روبرو می‌شه و کار نمی‌کنه. این‌جاست که <code>Xvfb</code> به کمکمون میاد: یه مانیتور غیر واقعی و قلابی!</p>

<p>استیم برای اجرا شدن به محیط گرافیکی نیاز داره و اگر ما توی cron فراخوانیش کنیم کار نمی‌کنه. پس یه مانیتور مجازی می‌سازیم که این مشکل رفع بشه.</p>

<h4 id="xvfb">۱. نصب Xvfb</h4>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get install xvfb</code></pre></div>

<h4 id="id-----">۲. به دست آوردن ID برنامه یا بازی مورد نظر</h4>
<p>هر برنامه‌ای توی استیم یک ID داره. مثلا من می‌خوام ID بازی Dota2 رو به دست بیارم. اسمش رو جستجو می‌کنم و به همچین لینکی می‌رسم:</p>

<div class="highlight"><pre><code class="language-text" data-lang="text">http://store.steampowered.com/app/570</code></pre></div>

<p><strong>بینگو!</strong> یقیناً اون <code>570</code> انتهای لینک ID مورد نظر ماست.</p>

<h4 id="section">۳. ساختن اسکریپت دانلود</h4>
<p>این اسکریپت به ترتیب این کارها رو برامون انجام می‌ده:</p>

<ul>
  <li>ساختن یک صفحه‌نمایش مجازی</li>
  <li>تنظیم <code>DISPLAY</code></li>
  <li>رفتن به پوشه‌ی خانگی(استیم باید توی <code>PWD=$HOME</code> اجرا بشه)</li>
  <li>اجرای خود استیم و لاگ کردن خروجیش</li>
</ul>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">Xvfb :5 -screen <span class="m">0</span> 1280x720x24 +extension GLX +render -noreset &gt; /dev/null 2&gt;<span class="p">&amp;</span><span class="m">1</span> <span class="p">&amp;</span>
<span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="s2">&quot;:5&quot;</span>
<span class="nb">cd</span>
/usr/games/steam -applaunch &lt;APPID&gt; &gt;&gt; steam.log 2&gt;<span class="p">&amp;</span>1</code></pre></div>

<p><strong>نکته:</strong> یادتون نره که <code>&lt;APPID&gt;</code> رو با ID برنامه‌تون عوض کنین. مثلا همون <code>570</code> که مربوط می‌شه به Dota2.</p>

<p>حالا هربار که اسکریپت رو اجرا کنین، دانلود برنامه شروع می‌شه. عملیات ادامه‌ی دانلود و توقفش و غیره به عهده‌ی خود استیمه پس خیالتون از ادامه دادن یا سالم بودن فایل‌های دانلود شده راحت باشه. در نهایت اسکریپت رو به cron عزیز بسپارید تا از بازیتون لذت ببرید.</p>

        </content>
      </item>
    
      <item>
        <title>تبدیل ایمیج به مخزن محلی</title>
        <description>
          
            &lt;p&gt;ایمیج‌های دبیان(و طبیعتاً نوادگانش مثل اوبونتو) خیلی از بسته‌های پایه رو توی خودشون دارن که ساختاری دقیقا شبیه به مخزن‌های apt داره. DVDهای دبیان هم رایج‌ترین بسته‌ها(مثل میزکارها و …) رو به همراه دارن. برای کسی که دانلود شبانه داره یکی از راه‌ها دانلود کردن بسته‌ها از قبل برای نصب در آینده‌ست. مسلما خیلی‌ها بعد از نصب کردن برنامه‌ی مورد نیازشون بسته‌های دانلود شده رو حذف می‌کنن و بدی این روش اینه‌که هر برنامه‌ای که لازم دارین باید تا دانلودش توی ساعت رایگان صبر کنین. خب چرا اغلب بسته‌ها رو دانلود نکنیم تا لازم نباشه هر دفعه صبر کنیم؟

          ...
        </description>
        <pubDate>Sun, 10 May 2015 21:07:40 +0430</pubDate>
        <link>http://mamins1376.github.io//weblog/2015/05/local-repo</link>
        <guid isPermaLink="true">http://mamins1376.github.io//weblog/2015/05/local-repo</guid>
        
        
        <category>local</category>
        
        <category>repo</category>
        
        <category>apt</category>
        
        <category>debian</category>
        
        <category>linux</category>
        
        <content>
        <p>ایمیج‌های دبیان(و طبیعتاً نوادگانش مثل اوبونتو) خیلی از بسته‌های پایه رو توی خودشون دارن که ساختاری دقیقا شبیه به مخزن‌های apt داره. DVDهای دبیان هم رایج‌ترین بسته‌ها(مثل میزکارها و …) رو به همراه دارن. برای کسی که دانلود شبانه داره یکی از راه‌ها دانلود کردن بسته‌ها از قبل برای نصب در آینده‌ست. مسلما خیلی‌ها بعد از نصب کردن برنامه‌ی مورد نیازشون بسته‌های دانلود شده رو حذف می‌کنن و بدی این روش اینه‌که هر برنامه‌ای که لازم دارین باید تا دانلودش توی ساعت رایگان صبر کنین. خب چرا اغلب بسته‌ها رو دانلود نکنیم تا لازم نباشه هر دفعه صبر کنیم؟
<!-- ادامه --></p>

<p><strong>توجه!</strong> همه‌ی فرمان‌های زیر به دسترسی روت نیاز دارن. این ایمیج‌ها شامل بسته‌های <code>non-free</code> نمی‌شن.</p>

<h4 id="section">۱. دانلود ایمیج‌ها</h4>
<p>من ۳ تا از DVDهای دبیان ۶۴بیتی رو دانلود کردم و توی پوشه‌ی خونگیم(یعنی <code>/root/</code>) ریختم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# ls -sh1 /root/*.iso
3.8G debian-8.0.0-amd64-DVD-1.iso
4.4G debian-8.0.0-amd64-DVD-2.iso
4.4G debian-8.0.0-amd64-DVD-3.iso</code></pre></div>

<h4 id="section-1">۲. سوارکردن ایمیج‌ها</h4>
<p>من ۳ تا ایمیج دارم، پس ۳ تا پوشه برای هرکدوم توی مسیر <code>/mnt/</code> درست می‌کنم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# mkdir -p /mnt/debian/dvd<span class="o">{</span>1,2,3<span class="o">}</span></code></pre></div>

<p>برای این که کار راحت‌تر بشه و نیازی به تایپ دستورهای طولانی نداشته باشیم، یه اسکریپت می‌سازیم که خودش برامون ایمیج‌ها رو سوار کنه. ایمیج‌های من توی <code>/root/</code> هستن. شما باید با توجه به مسیری که ایمیج‌هاتون اونجا هستن خط <code>ISO_DIR=/root</code> رو تغییر بدین:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# cat &gt; /usr/local/sbin/mount-repo
<span class="c">#!/bin/sh</span>
<span class="nv">ISO_DIR</span><span class="o">=</span>/root
mount -o loop,ro -t iso9660 <span class="nv">$ISO_DIR</span>/debian-8.0.0-amd64-DVD-1.iso /mnt/debian/dvd1/
mount -o loop,ro -t iso9660 <span class="nv">$ISO_DIR</span>/debian-8.0.0-amd64-DVD-2.iso /mnt/debian/dvd2/
mount -o loop,ro -t iso9660 <span class="nv">$ISO_DIR</span>/debian-8.0.0-amd64-DVD-3.iso /mnt/debian/dvd3/
^D
root@debian:~# chmod <span class="m">744</span> /usr/local/sbin/mount-repo
root@debian:~# /usr/local/sbin/mount-repo</code></pre></div>

<p>اگر اسکریپت <code>mount-repo</code> رو داخل <code>cron</code> قرار بدین دیگه نیازی نیست که هر دفعه خودتون اون رو فراخوانی کنین.</p>

<h4 id="apt">۳. تنظیم apt</h4>
<p>چون بسته‌هایی که داخل ایمیج‌ها هستن نیاز من رو برطرف می‌کردن، مخزن‌های راه دور رو کلا حذف کردم؛ اگر شما به مخازن فعلی‌تون نیاز دارین خطوط زیر رو به فایل مخازن apt فقط اضافه کنین. این فایل <code>etc/apt/sources.list/</code> منه:</p>

<div class="highlight"><pre><code class="language-debsources" data-lang="debsources"><span class="k">deb</span> <span class="s">file:///mnt/debian/dvd1/</span> <span class="kp">jessie</span> <span class="kp">contrib</span> <span class="kp">main</span>
<span class="k">deb</span> <span class="s">file:///mnt/debian/dvd2/</span> <span class="kp">jessie</span> <span class="kp">contrib</span> <span class="kp">main</span>
<span class="k">deb</span> <span class="s">file:///mnt/debian/dvd3/</span> <span class="kp">jessie</span> <span class="kp">contrib</span> <span class="kp">main</span></code></pre></div>

<p>و در آخر:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get update</code></pre></div>


        </content>
      </item>
    
      <item>
        <title>LMMS: خلاقیت به خرج دهید!</title>
        <description>
          
            &lt;p&gt;معمولا وقتی کسی از &lt;a href=&quot;http://windows.microsoft.com/en-us/windows/home&quot;&gt;جاهای ناجور&lt;/a&gt; به جمع آزادکارها می‌پیونده دنبال یک‌سری معادل برای برنامه‌هایی که قبلا با اون‌ها دمخور بوده می‌گرده؛ خب خیلی از آهنگ‌سازان امروزی از برنامه‌های آهنگ‌سازی با کامپیوتر مثل &lt;a href=&quot;http://www.image-line.com/flstudio/&quot;&gt;®FL Studio&lt;/a&gt; برای ساخت ملودی‌هاشون استفاده می‌کنن. ممکنه استفاده از معادل یک برنامه در ابتدا سخت به نظر بیاد، اما استثناهایی هم وجود دارن که از بقیه بهتر کار می‌کنن!&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/weblog/downloads/2015/05/lmms.png&quot; alt=&quot;LMMS Screenshot&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://lmms.io/&quot;&gt;Linux Multimedia Studio&lt;/a&gt; یکی از باحال‌ترین DAWها برای ساخت آهنگ‌های سبک الکترونیکه که از VST، MIDI، Soundfont و خیلی چیزهای دیگه پشتیبانی می‌کنه و &lt;a href=&quot;https://lmms.io/lsp/&quot;&gt;پلتفرمی&lt;/a&gt; هم برای به اشتراک‌گذاری محتواش داره.

          ...
        </description>
        <pubDate>Thu, 07 May 2015 15:37:45 +0430</pubDate>
        <link>http://mamins1376.github.io//weblog/2015/05/lmms</link>
        <guid isPermaLink="true">http://mamins1376.github.io//weblog/2015/05/lmms</guid>
        
        
        <category>lmms</category>
        
        <category>music</category>
        
        <content>
        <p>معمولا وقتی کسی از <a href="http://windows.microsoft.com/en-us/windows/home">جاهای ناجور</a> به جمع آزادکارها می‌پیونده دنبال یک‌سری معادل برای برنامه‌هایی که قبلا با اون‌ها دمخور بوده می‌گرده؛ خب خیلی از آهنگ‌سازان امروزی از برنامه‌های آهنگ‌سازی با کامپیوتر مثل <a href="http://www.image-line.com/flstudio/">®FL Studio</a> برای ساخت ملودی‌هاشون استفاده می‌کنن. ممکنه استفاده از معادل یک برنامه در ابتدا سخت به نظر بیاد، اما استثناهایی هم وجود دارن که از بقیه بهتر کار می‌کنن!</p>

<p><img src="/weblog/downloads/2015/05/lmms.png" alt="LMMS Screenshot" /></p>

<p><a href="https://lmms.io/">Linux Multimedia Studio</a> یکی از باحال‌ترین DAWها برای ساخت آهنگ‌های سبک الکترونیکه که از VST، MIDI، Soundfont و خیلی چیزهای دیگه پشتیبانی می‌کنه و <a href="https://lmms.io/lsp/">پلتفرمی</a> هم برای به اشتراک‌گذاری محتواش داره.
<!-- ادامه --></p>

<p>چند روش برای نصب این برنامه وجود داره:</p>

<ul>
  <li>نصب از مخزن رسمی</li>
  <li>نصب از مخزن غیر رسمی</li>
  <li>دانلود از سایت خود برنامه</li>
  <li>کامپایل و ازین حرفا</li>
</ul>

<p>دوتای اول راحت‌تر از بقیه هستن.</p>

<h4 id="lmms">۱. نصب LMMS</h4>

<h5 id="section">از مخزن رسمی</h5>
<p>فعلاً نسخه‌ی ۱.۰.۰ بدون پشتیبانی از VST توی <a href="apt://lmms">مخزن رسمی</a>‍ه:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">user@ubuntu:~<span class="nv">$ </span>sudo apt-get install lmms</code></pre></div>

<h5 id="section-1">از مخزن غیر رسمی</h5>
<p>نسخه‌ی ۱.۱.۰ هم با پشتیبانی از VST به همراه WINE توی مخزن <a href="https://launchpad.net/~irie">irie</a> هست:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">user@ubuntu:~<span class="nv">$ </span>sudo add-apt-repository ppa:irie/lmms
user@ubuntu:~<span class="nv">$ </span>sudo apt-get update
user@ubuntu:~<span class="nv">$ </span>sudo apt-get install lmms</code></pre></div>

<h4 id="section-2">۲. افزودن بانک صدا</h4>
<p>خود برنامه سمپل‌های خوبی داره ولی برای من کافی نبود. با توجه به این‌که fluidsynth یکی از بهترین سینثی‌سایزرهای متن‌بازه، ما از sf2ی اون استفاده می‌کنیم. حجم زیادی داره ولی صدای پیانو، گیتار(الکتریک، پلاستیک، بیس و …)، ویولن، درام‌ست و … رو به‌خوبی تولید می‌کنه.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">user@ubuntu:~<span class="nv">$ </span>sudo apt-get install fluid-soundfont-gm
user@ubuntu:~<span class="nv">$ </span>cp /usr/share/sounds/sf2/FluidR3_GM.sf2 ~/Soundbank.sf2</code></pre></div>

<p>حالا یک فایل به اسم <code>Soundbank.sf2</code> توی پوشه‌ی خانگی شما هست.</p>

<h4 id="section-3">۳. نمونه</h4>
<p>چون پلتفرم برنامه فقط اجازه‌ی اشتراک‌گذاری فایل پروژه‌ی برنامه رو می‌ده، همه‌ی فایل‌های موجود بدون هرگونه بانک صدا یا پلاگین خارجی آپلود می‌شن.
سری به <a href="https://lmms.io/lsp/?action=browse&amp;user=mamins1376">نمونه‌ی کارهای من</a> هم بزنین.</p>

<p>شما هم کارهای خودتون رو برای بقیه بذارین!</p>


        </content>
      </item>
    
      <item>
        <title>آریا۲ و اپت: سرعتی دوچندان</title>
        <description>
          
            &lt;p&gt;یکی از مشکلات کاربران دبیان-بیس‌ها، سرعت apt در امر طاقت‌فرسای دانلوده که باعث می‌شه خیلی‌ها سراغ مواردی مثل apt-fast برن. ما با ترکیب آریا۲ و اپت، یه دانلود کننده‌ی توپ می‌سازیم.

          ...
        </description>
        <pubDate>Tue, 05 May 2015 18:34:00 +0430</pubDate>
        <link>http://mamins1376.github.io//weblog/2015/05/apt-get-aria2</link>
        <guid isPermaLink="true">http://mamins1376.github.io//weblog/2015/05/apt-get-aria2</guid>
        
        
        <category>linux</category>
        
        <category>aria2</category>
        
        <category>apt-get</category>
        
        <category>package</category>
        
        <category>debian</category>
        
        <content>
        <p>یکی از مشکلات کاربران دبیان-بیس‌ها، سرعت apt در امر طاقت‌فرسای دانلوده که باعث می‌شه خیلی‌ها سراغ مواردی مثل apt-fast برن. ما با ترکیب آریا۲ و اپت، یه دانلود کننده‌ی توپ می‌سازیم.
<!-- ادامه --></p>

<p><strong>نکته مهم:</strong> هر دستوری که اولش علامت <code>#</code> رو می‌بینید به دسترسی روت نیاز داره و هر دستوری که اولش علامت <code>$</code> رو داره،‌ یعنی هر کاربری توانایی اجراش رو داره و دسترسی روت لازم نیست.</p>

<h4 id="section">۱. استخراج لینک‌ها</h4>
<p>مسلماً بسته‌های دبیان چیزی جز فایل نیستن و apt هم این «فایل»ها رو دانلود می‌کنه. خب وقتی خودش می‌تونه دانلود کنه،‌ چرا ما نتونیم؟ خوش‌بختانه برای همچین‌کاری یه سوئیچ خوب وجود داره:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get -y --print-uris <span class="o">{</span> install &lt;PACKAGE&gt; <span class="p">|</span> upgrade <span class="p">|</span> ... <span class="o">}</span></code></pre></div>

<p>این سوئیچ به apt می‌گه که فقط لینک رو بنویس و بی‌خیال دانلود شو. سوئیچ <code>y</code> هم می‌گه که خودت تائید کن.
مثلا من guake رو امتحان می‌کنم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get -y --print-uris install guake 
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
  python-glade2 python-vte
Suggested packages:
  python-gtk2-doc
The following NEW packages will be installed:
  guake python-glade2 python-vte
<span class="m">0</span> upgraded, <span class="m">3</span> newly installed, <span class="m">0</span> to remove and <span class="m">0</span> not upgraded.
Need to get <span class="m">201</span> kB of archives.
After this operation, 1,381 kB of additional disk space will be used.
<span class="s1">&#39;http://ir.archive.ubuntu.com/ubuntu/pool/main/v/vte/python-vte_0.28.2-5ubuntu1_amd64.deb&#39;</span> python-vte_1%3a0.28.2-5ubuntu1_amd64.deb <span class="m">21726</span> MD5Sum:a0b9e19f09fa001ca3e75534a5298c51
<span class="s1">&#39;http://ir.archive.ubuntu.com/ubuntu/pool/main/p/pygtk/python-glade2_2.24.0-3ubuntu3_amd64.deb&#39;</span> python-glade2_2.24.0-3ubuntu3_amd64.deb <span class="m">8744</span> MD5Sum:1aef0e4a843eac23ffc619bc02382f03
<span class="s1">&#39;http://ir.archive.ubuntu.com/ubuntu/pool/universe/g/guake/guake_0.4.4-1ubuntu1_amd64.deb&#39;</span> guake_0.4.4-1ubuntu1_amd64.deb <span class="m">171024</span> MD5Sum:a24f28469f7a83debc4aed2ec6ea1515</code></pre></div>

<p>اطلاعاتی که ما لازم داریم سه خط آخر هستن که وجه اشتراکشون <code>//:http</code> ابتداشونه. پس با <code>grep</code> فیلترشون می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get --print-uris -y install guake <span class="p">|</span> grep <span class="s1">&#39;http://&#39;</span>
<span class="s1">&#39;http://ir.archive.ubuntu.com/ubuntu/pool/main/v/vte/python-vte_0.28.2-5ubuntu1_amd64.deb&#39;</span> python-vte_1%3a0.28.2-5ubuntu1_amd64.deb <span class="m">21726</span> MD5Sum:a0b9e19f09fa001ca3e75534a5298c51
<span class="s1">&#39;http://ir.archive.ubuntu.com/ubuntu/pool/main/p/pygtk/python-glade2_2.24.0-3ubuntu3_amd64.deb&#39;</span> python-glade2_2.24.0-3ubuntu3_amd64.deb <span class="m">8744</span> MD5Sum:1aef0e4a843eac23ffc619bc02382f03
<span class="s1">&#39;http://ir.archive.ubuntu.com/ubuntu/pool/universe/g/guake/guake_0.4.4-1ubuntu1_amd64.deb&#39;</span> guake_0.4.4-1ubuntu1_amd64.deb <span class="m">171024</span> MD5Sum:a24f28469f7a83debc4aed2ec6ea1515</code></pre></div>

<p>ولی ما فقط اون قسمتی که لینک فایل توش هست رو نیاز داریم؛ پس اون‌رو هم با <code>cut</code> فیلتر می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get --print-uris -y install guake <span class="p">|</span> grep <span class="s1">&#39;http://&#39;</span> <span class="p">|</span> cut -d<span class="se">\&#39;</span> -f2
http://ir.archive.ubuntu.com/ubuntu/pool/main/v/vte/python-vte_0.28.2-5ubuntu1_amd64.deb
http://ir.archive.ubuntu.com/ubuntu/pool/main/p/pygtk/python-glade2_2.24.0-3ubuntu3_amd64.deb
http://ir.archive.ubuntu.com/ubuntu/pool/universe/g/guake/guake_0.4.4-1ubuntu1_amd64.deb</code></pre></div>

<p>این‌جا <code>cut</code> متن رو بر اساس کاراکتر ‍<code>'</code> تقسیم می‌کنه. لینکی که ما لازم داریم میشه ستون دوم.<br />
حالا لینک ها رو داریم. می‌ریزیمشون توی یه فایل به اسم <code>Links.txt</code>:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get --print-uris -y install guake <span class="p">|</span> grep <span class="s1">&#39;http://&#39;</span> <span class="p">|</span> cut -d<span class="se">\&#39;</span> -f2 &gt; Links.txt</code></pre></div>

<h4 id="section-1">۲. دانلود بسته‌ها</h4>
<p>برای این کار از <code>aria2</code> استفاده می‌کنیم.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# aria2c -d /var/cache/apt/archives/ -i Links.txt -s <span class="m">16</span> -x <span class="m">16</span> -c</code></pre></div>

<p>سوئیچ <code>d</code> مسیری که فایل‌های دانلود شده در اون ریخته می‌شن رو مشخص می‌کنه. ‍<code>i</code> هم مسیر لینک‌ها رو. بقیه‌ی سوئیچ‌ها هم که رایج هستن و مربوط تعداد اتصال‌ها و سرعت دانلود می‌شن.</p>

<h4 id="section-2">۳. نصب بسته ها</h4>
<p>همیشه اپت بسته‌ها رو توی مسیر <code>/var/cache/apt/archives/</code> می‌ریزه. خب، ما که خودمون این کار رو با aria2 کردیم! پس دیگه apt نیازی به دانلود نداره.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get -y install guake
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
  python-glade2 python-vte
Suggested packages:
  python-gtk2-doc
The following NEW packages will be installed:
  guake python-glade2 python-vte
<span class="m">0</span> upgraded, <span class="m">3</span> newly installed, <span class="m">0</span> to remove and <span class="m">0</span> not upgraded.
Need to get <span class="m">0</span> B/201 kB of archives.
After this operation, 1,381 kB of additional disk space will be used.
Selecting previously unselected package python-vte.
<span class="o">(</span>Reading database ... <span class="m">240702</span> files and directories currently installed.<span class="o">)</span>
Preparing to unpack .../python-vte_0.28.2-5ubuntu1_amd64.deb ...
Unpacking python-vte <span class="o">(</span>1:0.28.2-5ubuntu1<span class="o">)</span> ...
Selecting previously unselected package python-glade2.
Preparing to unpack .../python-glade2_2.24.0-3ubuntu3_amd64.deb ...
Unpacking python-glade2 <span class="o">(</span>2.24.0-3ubuntu3<span class="o">)</span> ...
Selecting previously unselected package guake.
Preparing to unpack .../guake_0.4.4-1ubuntu1_amd64.deb ...
Unpacking guake <span class="o">(</span>0.4.4-1ubuntu1<span class="o">)</span> ...
Processing triggers <span class="k">for</span> gconf2 <span class="o">(</span>3.2.6-0ubuntu2<span class="o">)</span> ...
Processing triggers <span class="k">for</span> man-db <span class="o">(</span>2.6.7.1-1ubuntu1<span class="o">)</span> ...
Processing triggers <span class="k">for</span> gnome-menus <span class="o">(</span>3.10.1-0ubuntu2<span class="o">)</span> ...
Processing triggers <span class="k">for</span> desktop-file-utils <span class="o">(</span>0.22-1ubuntu1<span class="o">)</span> ...
Processing triggers <span class="k">for</span> bamfdaemon <span class="o">(</span>0.5.1+14.04.20140409-0ubuntu1<span class="o">)</span> ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers <span class="k">for</span> mime-support <span class="o">(</span>3.54ubuntu1.1<span class="o">)</span> ...
Processing triggers <span class="k">for</span> hicolor-icon-theme <span class="o">(</span>0.13-1<span class="o">)</span> ...
Setting up python-vte <span class="o">(</span>1:0.28.2-5ubuntu1<span class="o">)</span> ...
Setting up python-glade2 <span class="o">(</span>2.24.0-3ubuntu3<span class="o">)</span> ...
Setting up guake <span class="o">(</span>0.4.4-1ubuntu1<span class="o">)</span> ...</code></pre></div>

<p>در ظمن اگر دیدین بسته‌های زیادی دانلود کردین و حجم زیادی رو اشغال، از شرشون خلاص بشین!</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# apt-get clean</code></pre></div>

<p>موفق باشین.</p>

        </content>
      </item>
    
      <item>
        <title>cron و rtcwake: خواب راحت</title>
        <description>
          
            &lt;p&gt;دانلود شبانه یکی از باحال‌ترین کارهاست ولی دردسرهایی داره: باید سیستم رو روشن بذارین تا سر ساعت شروع کنه. &lt;a href=&quot;http://forum.ubuntu.ir/index.php?topic=59242.0&quot;&gt;rtcwake&lt;/a&gt; قراره به کمک cron این مشکل رو برای همیشه برامون حل کنه تا به‌خاطر چند گیگ ناقابل از خواب‌مون نزنیم!

          ...
        </description>
        <pubDate>Mon, 04 May 2015 20:00:00 +0430</pubDate>
        <link>http://mamins1376.github.io//weblog/2015/05/rtcwake-cron</link>
        <guid isPermaLink="true">http://mamins1376.github.io//weblog/2015/05/rtcwake-cron</guid>
        
        
        <category>linux</category>
        
        <category>cron</category>
        
        <category>rtcwake</category>
        
        <content>
        <p>دانلود شبانه یکی از باحال‌ترین کارهاست ولی دردسرهایی داره: باید سیستم رو روشن بذارین تا سر ساعت شروع کنه. <a href="http://forum.ubuntu.ir/index.php?topic=59242.0">rtcwake</a> قراره به کمک cron این مشکل رو برای همیشه برامون حل کنه تا به‌خاطر چند گیگ ناقابل از خواب‌مون نزنیم!
<!-- ادامه --></p>

<p><a href="http://forum.ubuntu.ir/index.php/topic,40582.0.html">راهنماهای خوبی</a> برای دانلود شبانه وجود دارن پس ما از اول شروع نمی‌کنیم و فقط تنظیم سیستم رو این‌جا شرح می‌دیم.<br />
<strong>نکته:</strong> rtcwake و cron هردو روی توزیع دبیان به‌طور پیش‌فرض نصبن. برای نصبش روی توزیع خودتون از مدیربسته استفاده کنین. این روش به نوع توزیع وابسته نیست.</p>

<h4 id="rtcwake">۱. کار با rtcwake</h4>
<p>چون کار با بسیاری از سخت‌افزارهای سیستم نیازمند دسترسی روت هست، rtcwake که از ساعت سخت‌افزاری سیستم استفاده می‌کنه طبیعتاً از این قاعده مستثنی نیست. پس باید کارهای مربوط به rtcwake رو با این سطح دسترسی انجام بدیم. قالب مورد نیاز ما برای روشن کردن سیستم سر ساعت <code>&lt;TIME&gt;</code> که بر حسب زمان محلی وارد می‌شه( سوییچ <code>l-</code> این کار رو انجام می‌ده) به این صورته:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# rtcwake -l -m no -t <span class="k">$(</span> date +%s -d &lt;TIME&gt; <span class="k">)</span></code></pre></div>

<p>سوئیچ <code>m</code> به rtcwake می‌گه بعد از این که سیستم رو تنظیم کردی، هیچ‌کاری نکن(مثل خاموش کردن، حالت خواب و …). date خروجی‌ش رو به rtcwake می‌ده که واحدش ثانیه‌ست و فاصله‌ی زمان داده‌شده رو با مبدأ زمانی یونیکس مشخص می‌کنه. مثلا ما می‌خوایم ساعت ۱ شب سیستم روشن بشه:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# rtcwake -l -m no -t <span class="k">$(</span> date +%s -d <span class="s1">&#39;tomorrow 01:00&#39;</span> <span class="k">)</span></code></pre></div>

<p>کلمه‌ی <code>tomorrow‍</code> به date می‌فهمونه که منظور ما ساعت ۱‍ شبی‌‍ه که از ساعت ۲۴ گذشته باشه؛ یعنی اگر این دستور بعد از ساعت ۱۲ شب اجرا بشه روشن کردن سیستم رو به فردا شب موکول می‌کنه! پس دقت کنین که الان ساعت چنده.</p>

<h4 id="cron">۲. افزودن به cron</h4>
<p>خود cron یک‌سری کلمه داره که رویداد خاصی رو مشخص می‌کنه. مثلا <code>reboot</code> به معنی «هر وقت سیستم روشن شد»‍ه. <strong>چه خوب!</strong> ما از این قابلیت استفاده می‌کنیم و به cron می‌گیم که هروقت سیستم روشن شد برای دانلود شبانه تنظیمش کنه. این طوری دیگه نیازی به اجرای دستی rtcwake نیست.<br />
معمولا چون cron خیلی از مسیرهای رایج رو توی متغییر محیطی <code>PATH</code> نداره مجبوریم خودمون دستی مسیر هر کدوم از اجرایی‌ها رو وارد کنیم.<br />
<strong>توجه!</strong> مسیرهایی که این‌جا برای date و rtcwake استفاده شدن ممکنه روی سیستم شما فرق کنن. با دستور <code>which</code> می‌تونید از مسیر هر دستوری مطلع بشین.  </p>

<p>اول cron مربوط به کاربر ریشه رو باز می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@debian:~# crontab -u root -e</code></pre></div>

<p>حالا خط زیر رو واردش می‌کنیم. توجه داشته باشین که <code>&lt;TIME&gt;</code> رو با زمان دلخواهتون عوض کنین:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">@reboot /usr/sbin/rtcwake -l -m no -t <span class="k">$(</span> /bin/date +<span class="se">\%</span>s -d &lt;TIME&gt; <span class="k">)</span></code></pre></div>

<p>و در انتها سیستم رو ریبوت کنین تا rtcwake ساعت رو تنظیم کنه.</p>


        </content>
      </item>
    
      <item>
        <title>دبیان بر بستر اندروید: پیش به سوی جسی!(قسمت دوم)</title>
        <description>
          
            &lt;p&gt;در &lt;a href=&quot;http://mamins1376.github.io//weblog/2015/05/debootstrap-android-part1&quot;&gt;قسمت قبل&lt;/a&gt; بسته‌ها بارگیری و به پوشه‌ی &lt;code&gt;debroot&lt;/code&gt; منتقل شدند. حالا ادامه‌ی مراحل را انجام می‌دهیم.

          ...
        </description>
        <pubDate>Sun, 03 May 2015 16:00:00 +0430</pubDate>
        <link>http://mamins1376.github.io//weblog/2015/05/debootstrap-android-part2</link>
        <guid isPermaLink="true">http://mamins1376.github.io//weblog/2015/05/debootstrap-android-part2</guid>
        
        
        <category>linux</category>
        
        <category>android</category>
        
        <category>debootstrap</category>
        
        <content>
        <p>در <a href="http://mamins1376.github.io//weblog/2015/05/debootstrap-android-part1">قسمت قبل</a> بسته‌ها بارگیری و به پوشه‌ی <code>debroot</code> منتقل شدند. حالا ادامه‌ی مراحل را انجام می‌دهیم.
<!-- ادامه --></p>

<h4 id="section">۳. ساخت تصویر توزیع</h4>
<p>یک ایمیج خالی با استفاده از <code>dd</code> درست می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# dd <span class="k">if</span><span class="o">=</span>/dev/zero <span class="nv">of</span><span class="o">=</span>Debian.img <span class="nv">count</span><span class="o">=</span><span class="m">0</span> <span class="nv">bs</span><span class="o">=</span>1M <span class="nv">seek</span><span class="o">=</span>1K</code></pre></div>

<p>حجم ایمیج ساخته‌شده ۱گیگابایت خواهد بود. برای داشتن اندازه‌ی دلخواهتان مقدار <code>seek</code> را بر حسب مگابایت تغییر دهید.<br />
آن را فرمت می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# mkfs.ext4 -F -L Debian Debian.img</code></pre></div>

<p>و سپس سوار می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# mount -t ext4 -o loop,rw Debian.img /mnt</code></pre></div>

<p>حالا همه‌ی بسته‌های بارگیری شده را به ایمیج کپی می‌کنیم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# cp -r debroot/* /mnt/<span class="p">;</span> sync</code></pre></div>

<p>و ایمیج را جدا:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# umount /mnt</code></pre></div>

<p>حالا ما یک ایمیج از توزیع‌مان داریم ولی هنوز آماده نیست. از این‌جا دیگر به پوشه‌ی <code>debroot</code> نیاز نداریم.</p>

<h4 id="section-1">۴. انتقال توزیع به اندروید</h4>
<p>مهم نیست که ایمیج کجا کپی می‌شود، ولی باید قابل دسترس باشد و فضای کافی داشته باشد. مثلا ایمیج من در <code>/storage/sdcard1/Disks/</code> قرار دارد. پس از انتقال ایمیج، دیگر کاری با ماشین گنو/لینوکسی نداریم.<br />
<strong>توجه!</strong> در مرحله‌ی بعد به <a href="http://busybox.net/">BusyBox</a> نیاز خواهیم داشت. اگر هنوز آن را روی اندروید نصب نکرده‌اید، همین حالا <a href="https://play.google.com/store/apps/details?id=com.jrummy.busybox.installer">نصب کنید</a>.</p>

<h4 id="section-2">۵. نصب توزیع</h4>
<p>یک پوشه می‌سازیم. این پوشه محل سوارشدن ایمیج خواهد بود:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@android:~# mkdir /data/debian
root@android:~# busybox mount -o loop,rw -t ext4 &lt;IMAGE&gt; /data/debian</code></pre></div>

<p>یادتان نرود که در کدهای گفته شده، <code>&lt;IMAGE&gt;</code> را با مسیر ایمیجی که کپی کردیم عوض کنید. وارد توزیع می‌شویم:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@android:~# <span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
root@android:~# <span class="nb">export </span><span class="nv">USER</span><span class="o">=</span>root
root@android:~# <span class="nb">export </span><span class="nv">HOME</span><span class="o">=</span>/root
root@android:~# busybox chroot /data/debian /bin/bash
root@localhost:/#</code></pre></div>

<p>اکنون شما وارد توزیع شدید. اما هنوز بسته‌ها را استخراج نکردیم!</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@localhost:/# /debootstrap/debootstrap --second-stage</code></pre></div>

<p><code>debootstrap</code> شروع به نصب سیستم می‌کند.</p>

<p><strong>تبریک!</strong> توزیع ما آماده است؛ ولی هنوز کارهای کوچکی باقی‌مانده که می‌تواند کار ما را راحت‌تر کند. مثلا با اسکریپت زیر، هربار توزیع آماده و اجرا می‌شود و پس از اتمام کار خودبه‌خود جدا می‌شود. من <a href="/weblog/downloads/2015/05/debian">این اسکریپت</a> را در مسیر <code>system/bin/debian/</code> قرار دادم.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="lineno"> 1 </span><span class="nb">export </span><span class="nv">DEBMNT</span><span class="o">=</span>/data/debian
<span class="lineno"> 2 </span>busybox mount -t ext2 &lt;IMAGE&gt; <span class="nv">$DEBMNT</span>
<span class="lineno"> 3 </span>busybox mount -t proc none <span class="nv">$DEBMNT</span>/proc
<span class="lineno"> 4 </span>busybox mount -t sysfs none <span class="nv">$DEBMNT</span>/sys
<span class="lineno"> 5 </span>busybox mount -o <span class="nb">bind</span> /dev <span class="nv">$DEBMNT</span>/dev
<span class="lineno"> 6 </span>busybox mount -t devpts none <span class="nv">$DEBMNT</span>/dev/pts
<span class="lineno"> 7 </span><span class="nb">unset </span>LD_PRELOAD
<span class="lineno"> 8 </span><span class="nv">LAST_PATH</span><span class="o">=</span><span class="nv">$PATH</span>
<span class="lineno"> 9 </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
<span class="lineno">10 </span><span class="nb">export </span><span class="nv">USER</span><span class="o">=</span>root
<span class="lineno">11 </span><span class="nb">export </span><span class="nv">HOME</span><span class="o">=</span>/root
<span class="lineno">12 </span><span class="nb">export </span><span class="nv">TERM</span><span class="o">=</span>linux
<span class="lineno">13 </span>busybox chroot <span class="nv">$DEBMNT</span> /bin/bash
<span class="lineno">14 </span><span class="nb">export </span><span class="nv">PATH</span><span class="o">=</span><span class="nv">$LAST_PATH</span>
<span class="lineno">15 </span>sync
<span class="lineno">16 </span>busybox umount <span class="nv">$DEBMNT</span>/dev/pts
<span class="lineno">17 </span>busybox umount <span class="nv">$DEBMNT</span>/dev
<span class="lineno">18 </span>busybox umount <span class="nv">$DEBMNT</span>/proc
<span class="lineno">19 </span>busybox umount <span class="nv">$DEBMNT</span>/sys
<span class="lineno">20 </span>busybox umount <span class="nv">$DEBMNT</span> <span class="o">||</span> sh -c <span class="s2">&quot;busybox umount -l </span><span class="nv">$DEBMNT</span><span class="s2"> &amp;&amp; echo &#39;Force unmounted!&#39;&quot;</span></code></pre></div>

<h4 id="apt">۶. تنظیم apt</h4>
<p>لازم است که تغییراتی در <code>sources.list</code> مربوط به مدیر بسته‌ی <code>apt</code> به‌وجود آوریم تا بتوانیم بسته‌های مورد نیازمان را نصب کنیم.</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@localhost:/# vi /etc/apt/sources.list</code></pre></div>

<p><strong>توجه!</strong> به جای ویرایش‌گر <code>vi</code>، هر ویرایشی که با آن راحت‌تر هستید استفاده کنید. <code>nano</code> به‌طور پیش‌فرض نصب است.<br />
خطوط زیر را به آن اضافه کنید یا فایل آماده را <a href="/weblog/downloads/2015/05/sources.list">دریافت کنید</a>.</p>

<div class="highlight"><pre><code class="language-debsources" data-lang="debsources"><span class="lineno">1 </span><span class="k">deb</span> <span class="s">http://ftp.ir.debian.org/debian/</span> <span class="kp">jessie</span> <span class="kp">contrib</span> <span class="kp">main</span> <span class="kp">non-free</span>
<span class="lineno">2 </span><span class="k">deb-src</span> <span class="s">http://ftp.ir.debian.org/debian/</span> <span class="kp">jessie</span> <span class="kp">contrib</span> <span class="kp">main</span> <span class="kp">non-free</span>
<span class="lineno">3 </span>
<span class="lineno">4 </span><span class="k">deb</span> <span class="s">http://ftp.ir.debian.org/debian/</span> <span class="kp">jessie-backports</span> <span class="kp">contrib</span> <span class="kp">main</span> <span class="kp">non-free</span>
<span class="lineno">5 </span><span class="k">deb-src</span> <span class="s">http://ftp.ir.debian.org/debian/</span> <span class="kp">jessie-backports</span> <span class="kp">contrib</span> <span class="kp">main</span> <span class="kp">non-free</span>
<span class="lineno">6 </span>
<span class="lineno">7 </span><span class="k">deb</span> <span class="s">http://ftp.ir.debian.org/debian/</span> <span class="kp">jessie-updates</span> <span class="kp">contrib</span> <span class="kp">main</span> <span class="kp">non-free</span>
<span class="lineno">8 </span><span class="k">deb-src</span> <span class="s">http://ftp.ir.debian.org/debian/</span> <span class="kp">jessie-updates</span> <span class="kp">contrib</span> <span class="kp">main</span> <span class="kp">non-free</span></code></pre></div>

<p>و در آخر،‌ برای به‌روزرسانی کَش <code>apt</code>:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@localhost:/# apt-get update</code></pre></div>

<p><strong>توجه!</strong> فرمان بالا نیاز به اتصال اینترنت دارد.<br />
اکنون توزیع شما دقیقا مانند یک توزیع گنو/لینوکس عادی رفتار می‌کند.</p>

<p>در قسمت بعد به نصب محیط گرافیکی(به هر دو روش <code>framebuffer</code> و <code>VNC</code>) خواهیم پرداخت.</p>


        </content>
      </item>
    
      <item>
        <title>دبیان بر بستر اندروید: پیش به سوی جسی!(قسمت اول)</title>
        <description>
          
            &lt;p&gt;بسیاری از افراد پس از خرید یک تلفن هوشمند یا تبلت، اقدام به روت کردن آن می‌کنند. مفهوم «روت» در اندروید همانند مفهوم روت در دیگر سیستم‌های گنو/لینوکسی‌ست. دلایل زیادی برای روت‌کردن وجود دارد: شخصی‌سازی بیش‌تر، حذف برنامه‌های سیستمی، اصلاح سیستم و البته نصب یک توزیع گنو/لینوکسی.&lt;br /&gt;
در این‌جا، به نصب دبیان ۸ (جسی) بر روی یک وسیله‌ی مبتنی بر اندروید می‌پردازیم.

          ...
        </description>
        <pubDate>Sat, 02 May 2015 23:00:46 +0430</pubDate>
        <link>http://mamins1376.github.io//weblog/2015/05/debootstrap-android-part1</link>
        <guid isPermaLink="true">http://mamins1376.github.io//weblog/2015/05/debootstrap-android-part1</guid>
        
        
        <category>اندروید</category>
        
        <category>دبیان</category>
        
        <category>جسی</category>
        
        <category>debootstrap</category>
        
        <content>
        <p>بسیاری از افراد پس از خرید یک تلفن هوشمند یا تبلت، اقدام به روت کردن آن می‌کنند. مفهوم «روت» در اندروید همانند مفهوم روت در دیگر سیستم‌های گنو/لینوکسی‌ست. دلایل زیادی برای روت‌کردن وجود دارد: شخصی‌سازی بیش‌تر، حذف برنامه‌های سیستمی، اصلاح سیستم و البته نصب یک توزیع گنو/لینوکسی.<br />
در این‌جا، به نصب دبیان ۸ (جسی) بر روی یک وسیله‌ی مبتنی بر اندروید می‌پردازیم.
<!-- ادامه --></p>

<h3 id="section">چه‌چیزی لازم داریم؟</h3>
<ul>
  <li>یک ماشین گنو/لینوکسی: ترجیحاً از خانواده‌ی دبیان</li>
  <li>دسترسی به اینترنت یا مخزن محلی: حدود ۶۰-۷۰ مگابایت در این روش بارگیری خواهد شد.</li>
  <li>تلفن هوشمند یا تبلت روت شده</li>
  <li>کابل اتصال به رایانه: برای انتقال داده از ماشین گنو/لینوکسی به دستگاه</li>
  <li>حداقل ۱ گیگابایت فضای خالی روی دستگاه: مهم نیست که روی حافظه‌ی داخلی باشد یا کارت SD خارجی</li>
  <li>وقت و حوصله‌ی فراوان</li>
</ul>

<h3 id="section-1">چه قابلیت‌هایی دارد؟</h3>
<ul>
  <li>اجرا به موازات اندروید بدون دستکاری سیستم</li>
  <li>روان، سریع و بدون نصب هرگونه برنامه‌ی شخص سوم</li>
  <li>حذف آسان</li>
  <li>محیط گرافیکی(اختیاری)</li>
  <li>اجرای اکثر برنامه‌های گنو/لینوکس(<a href="https://www.winehq.org/about/">WINE</a> هم شامل می‌شود!)</li>
</ul>

<h4 id="debootstrap">۱. نصب debootstrap</h4>
<p>برای نصب گنو/لینوکس از گنو/لینوکس، <code>debootstrap</code> گزینه‌ی خوبی‌ست، ایجاد یکی دیگر از صفر مطلق؛ بدون کرنل، بوت‌لودر و هرگونه بسته‌ی اختیاری.<br />
فایل‌های تولیدشده <strong>فقط</strong> شامل بسته‌های پایه‌ی سیستم می‌شود.<br />
ابتدا آن را نصب می‌کنیم:  </p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# apt-get install debootstrap</code></pre></div>

<p>برای شروع کار با debootstrap به این اطلاعات نیازمندیم:</p>

<ul>
  <li><strong>نوع پردازنده</strong>: در حال حاضر دو نوع پردازنده، غالب دستگاه‌های بازار را پوشش می‌دهند:
    <ul>
      <li><code>x86</code>: معماری کامپیوترهای ۳۲بیتی رایج</li>
      <li><code>arm</code>: معماری میکروکنترلرهای پیش‌رفته و نسل جدید که خود سه نوع دارد:
        <ul>
          <li><code>armel</code>: نسل قدیمی <code>arm</code></li>
          <li><code>armhf</code>: نسل جدید <code>arm</code> که <code>armv7</code> معادل این نسل است</li>
          <li><code>arm64</code>: چیپ‌های <code>arm</code> نسخه‌ی ۶۴بیتی<br />
بسته به نوع دستگاه باید یکی از ۴ مورد بالا را انتخاب کرد.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>نسخه‌ی توزیع</strong>: ما از توزیع <a href="https://www.debian.org/">دبیان</a> نسخه‌ی <a href="https://www.debian.org/News/2015/20150426">۸(جسی)</a> استفاده می‌کنیم. شما می‌توانید از هرنسخه‌ی دیگری(<code>stable</code>، <code>testing</code>، <code>wheezy</code>، …) استفاده کرده یا حتی به جای دبیان، <a href="http://www.ubuntu.com/">اوبونتو</a> را امتحان کنید.</li>
  <li><strong>آینه‌ی بسته‌ها</strong>: برای بارگیری بسته‌های اصلی سیستم از یک آینه استفاده می‌شود؛ این آینه می‌تواند محلی بوده یا روی ماشین دیگری باشد. فاصله‌ی جغرافیایی کمتر بین شما و آینه‌ی منتخبتان معمولاً سرعت بیش‌تری را به همراه دارد. نوع محلی از تصویر توزیع بهره می‌برد که توضیح نحوه‌ی استفاده از آن خارج از حوصله‌ی این مطلب است. ما از مخزن ایران استفاده خواهیم کرد.</li>
</ul>

<h4 id="section-2">۲. بارگیری پایه‌ی سیستم</h4>
<p>پوشه‌ای ایجاد می‌کنیم. این پوشه حاوی فایل‌های اصلی توزیع ما خواهد بود:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# mkdir debroot</code></pre></div>

<p>سینتکس کلی برنامه‌ی <code>debootstrap</code> این است:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# debootstrap <span class="o">[</span>OPTIONS<span class="o">]</span> &lt;DIST&gt; &lt;DIR&gt; <span class="o">[</span>&lt;MIRROR&gt;<span class="o">]</span></code></pre></div>

<p>برای ما:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">root@host:~# debootstrap --foreign --arch<span class="o">=</span>armhf jessie ./debroot http://ftp.ir.debian.org/debian/</code></pre></div>

<p>در این‌جا:</p>

<ul>
  <li><code>foreign</code>: به برنامه می‌گوید که بسته‌ها را استخراج نکند، زیرا معماری ماشین هدف با معماری این ماشین متفاوت است.</li>
  <li><code>arch</code>: معماری ماشین هدف(اندروید) را مشخص می‌کند که در بالا توضیح داده شد.</li>
  <li><code>jessie</code>: نسخه‌ی توزیع</li>
  <li><code>debroot/.</code>: نشانی پوشه‌ای که بالاتر ساختیم.</li>
  <li><code>...http://ftp</code>: نشانی آینه.</li>
</ul>

<p>پس از بارگیری بسته‌ها، توزیع دریافت شده و <code>debootstrap</code> بسته‌ها را درون پوشه‌ی <code>debroot</code> خواهد ریخت.</p>

<p>در <a href="http://mamins1376.github.io//weblog/2015/05/debootstrap-android-part2">قسمت بعد</a>، بسته‌های دریافت شده را به اندروید منتقل کرده و مراحل راه‌اندازی را انجام خواهیم داد.</p>


        </content>
      </item>
    
  </channel>
</rss>
