<!DOCTYPE html>
<html lang="fa">
<head>
    <title>تبدیل ایمیج به مخزن محلی - زندگی خوره‌ای</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width">
  <link rel="icon" type="image/png" href="https://mamins1376.github.io/weblog/favicon.png">

  <link href="https://mamins1376.github.io/weblog/atom.xml" type="application/atom+xml" rel="alternate" title="خوراک اتم کامل زندگی خوره‌ای" />
  <link href="https://mamins1376.github.io/weblog/rss.xml" type="application/rss+xml" rel="alternate" title="خوراک آراس‌اس کامل زندگی خوره‌ای" />
  <link href="https://mamins1376.github.io/weblog/category/lynwkhs.atom.xml" type="application/atom+xml" rel="alternate" title="خوراک اتم دسته لینوکس - زندگی خوره‌ای" />
  <link href="https://mamins1376.github.io/weblog/category/lynwkhs.rss.xml" type="application/rss+xml" rel="alternate" title="خوراک آراس‌اس دسته لینوکس - زندگی خوره‌ای" />

      <link href="https://mamins1376.github.io/weblog/theme/css/style.css" rel="stylesheet" />
      <link href="https://mamins1376.github.io/weblog/theme/css/syntax.css" rel="stylesheet" />
      <link href="https://mamins1376.github.io/weblog/theme/css/fonts.css" rel="stylesheet" />
      <link href="https://mamins1376.github.io/weblog/theme/css/minimal.css" media="screen and (max-width: 800px)" rel="stylesheet" />

    <meta name="tags" content="مخزن" />
    <meta name="tags" content="دبیان" />
    <meta name="tags" content="اوبونتو" />
</head>
<body>
  <div class='container'>
<header class="site-header">
  <div class="warpper">
    <img class="site-logo" src="https://mamins1376.github.io/weblog/logo.png"></img>
    <a class="site-title" href="https://mamins1376.github.io/weblog">زندگی خوره‌ای</a>
    <nav class="site-navigation">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"></path>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"></path>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"></path>
        </svg>
      </a>
      <div class="trigger">
        <a class="page-link" href="https://mamins1376.github.io/weblog/categories.html">دسته‌ها</a>
        <!-- <a class="page-link" href="https://mamins1376.github.io/weblog/tags.html">برچسب‌ها</a> -->
          <a class="page-link" href="https://mamins1376.github.io/weblog/pages/drbrh/">درباره</a>
      </div>
    </ul></nav>
  </div>
</header>    <div class="warpper">
<section class="page-content">
  <header class="post-header">
    <h2 class="post-title">
      <a href="https://mamins1376.github.io/weblog/2015/05/tbdyl-ymyj-bh-mkhzn-mhly/" rel="bookmark"
         title="تبدیل ایمیج به مخزن محلی">تبدیل ایمیج به مخزن محلی</a></h2>
 
  </header>
  <div class="post-info">
      <abbr class="publish-date" title="تاریخ انتشار">انتشار: Sun 10 May 2015</abbr>
    <address class="vcard author">از
        <a class="url fn" href="https://mamins1376.github.io/weblog/author/mhmdmyn-smty.html">محمدامین صامتی</a>
    </address>
در دسته‌ی
    <a title='لینوکس' href='https://mamins1376.github.io/weblog/category/lynwkhs.html'>لینوکس</a>
  </div>
  <div class="post-content">
    <p>ایمیج‌های دبیان(و طبیعتاً نوادگانش مثل اوبونتو) خیلی از بسته‌های پایه رو توی خودشون دارن که ساختاری دقیقا شبیه به مخزن‌های apt داره. DVDهای دبیان هم رایج‌ترین بسته‌ها(مثل میزکارها و ...) رو به همراه دارن. برای کسی که دانلود شبانه داره یکی از راه‌ها دانلود کردن بسته‌ها از قبل برای نصب در آینده‌ست. مسلما خیلی‌ها بعد از نصب کردن برنامه‌ی مورد نیازشون بسته‌های دانلود شده رو حذف می‌کنن و بدی این روش اینه‌که هر برنامه‌ای که لازم دارین باید تا دانلودش توی ساعت رایگان صبر کنین. خب چرا اغلب بسته‌ها رو دانلود نکنیم تا لازم نباشه هر دفعه صبر کنیم؟
<!-- ادامه --></p>
<p><strong>توجه!</strong> همه‌ی فرمان‌های زیر به دسترسی روت نیاز دارن. این ایمیج‌ها شامل بسته‌های <code>non-free</code> نمی‌شن.</p>
<h4>۱. دانلود ایمیج‌ها</h4>
<p>من ۳ تا از DVDهای دبیان ۶۴بیتی رو دانلود کردم و توی پوشه‌ی خونگیم(یعنی <code>/root/</code>) ریختم:</p>
<div class="highlight"><pre>root@debian:~# ls -sh1 /root/*.iso
3.8G debian-8.0.0-amd64-DVD-1.iso
4.4G debian-8.0.0-amd64-DVD-2.iso
4.4G debian-8.0.0-amd64-DVD-3.iso
</pre></div>


<h4>۲. سوارکردن ایمیج‌ها</h4>
<p>من ۳ تا ایمیج دارم، پس ۳ تا پوشه برای هرکدوم توی مسیر <code>/mnt/</code> درست می‌کنم:</p>
<div class="highlight"><pre>root@debian:~# mkdir -p /mnt/debian/dvd<span class="o">{</span>1,2,3<span class="o">}</span>
</pre></div>


<p>برای این که کار راحت‌تر بشه و نیازی به تایپ دستورهای طولانی نداشته باشیم، یه اسکریپت می‌سازیم که خودش برامون ایمیج‌ها رو سوار کنه. ایمیج‌های من توی <code>/root/</code> هستن. شما باید با توجه به مسیری که ایمیج‌هاتون اونجا هستن خط <code>ISO_DIR=/root</code> رو تغییر بدین:</p>
<div class="highlight"><pre>root@debian:~# cat &gt; /usr/local/sbin/mount-repo
<span class="c">#!/bin/sh</span>
<span class="nv">ISO_DIR</span><span class="o">=</span>/root
mount -o loop,ro -t iso9660 <span class="nv">$ISO_DIR</span>/debian-8.0.0-amd64-DVD-1.iso /mnt/debian/dvd1/
mount -o loop,ro -t iso9660 <span class="nv">$ISO_DIR</span>/debian-8.0.0-amd64-DVD-2.iso /mnt/debian/dvd2/
mount -o loop,ro -t iso9660 <span class="nv">$ISO_DIR</span>/debian-8.0.0-amd64-DVD-3.iso /mnt/debian/dvd3/
^D
root@debian:~# chmod <span class="m">744</span> /usr/local/sbin/mount-repo
root@debian:~# /usr/local/sbin/mount-repo
</pre></div>


<p>اگر اسکریپت <code>mount-repo</code> رو داخل <code>cron</code> قرار بدین دیگه نیازی نیست که هر دفعه خودتون اون رو فراخوانی کنین.</p>
<h4>۳. تنظیم apt</h4>
<p>چون بسته‌هایی که داخل ایمیج‌ها هستن نیاز من رو برطرف می‌کردن، مخزن‌های راه دور رو کلا حذف کردم؛ اگر شما به مخازن فعلی‌تون نیاز دارین خطوط زیر رو به فایل مخازن apt فقط اضافه کنین. این فایل <code>etc/apt/sources.list/</code> منه:</p>
<div class="highlight"><pre><span class="k">deb</span> <span class="s">file:///mnt/debian/dvd1/</span> <span class="kp">jessie</span> <span class="kp">contrib</span> <span class="kp">main</span>
<span class="k">deb</span> <span class="s">file:///mnt/debian/dvd2/</span> <span class="kp">jessie</span> <span class="kp">contrib</span> <span class="kp">main</span>
<span class="k">deb</span> <span class="s">file:///mnt/debian/dvd3/</span> <span class="kp">jessie</span> <span class="kp">contrib</span> <span class="kp">main</span>
</pre></div>


<p>و در آخر:</p>
<div class="highlight"><pre>root@debian:~# apt-get update
</pre></div>
  </div>
  <div class='post-tags'>برچسب‌ها:
    <a class='tag-link' href='https://mamins1376.github.io/weblog/tag/mkhzn.html' title='مخزن'>مخزن</a>
    <span class='tag-seprator'>،</span>
    <a class='tag-link' href='https://mamins1376.github.io/weblog/tag/dbyn.html' title='دبیان'>دبیان</a>
    <span class='tag-seprator'>،</span>
    <a class='tag-link' href='https://mamins1376.github.io/weblog/tag/wbwntw.html' title='اوبونتو'>اوبونتو</a>
    <span class='tag-seprator'>،</span>
  </div>
<div class="share-buttons">
  <span class="share-message-normal">به دوستان خود نیز بگویید:</span> 
  <span class="share-message-small">اشتراک گذاری:</span> 
  <span class="share-button">
    <a target="_blank" title="تاگرام" href="https://telegram.me/share/url?url=https://mamins1376.github.io/weblog/2015/05/tbdyl-ymyj-bh-mkhzn-mhly/">
      <img src="https://mamins1376.github.io/weblog/theme/images/share-telegram.png" alt="تلگرام" />
    </a>
  </span>
  <span class="share-button">
    <a target="_blank" title="توئیتر" href="https://twitter.com/home?status=تبدیل ایمیج به مخزن محلی https://mamins1376.github.io/weblog/2015/05/tbdyl-ymyj-bh-mkhzn-mhly/">
      <img src="https://mamins1376.github.io/weblog/theme/images/share-twitter.png" alt="توئیتر" />
    </a>
  </span>
  <span class="share-button">
    <a target="_blank" title="گوگل پلاس" href="https://plus.google.com/share?url=https://mamins1376.github.io/weblog/2015/05/tbdyl-ymyj-bh-mkhzn-mhly/">
      <img src="https://mamins1376.github.io/weblog/theme/images/share-googleplus.png" alt="گوگل پلاس" />
    </a>
  </span>
  <span class="share-button">
    <a target="_blank" title="فیس‌بوک" href="https://www.facebook.com/sharer/sharer.php?u=https://mamins1376.github.io/weblog/2015/05/tbdyl-ymyj-bh-mkhzn-mhly/">
      <img src="https://mamins1376.github.io/weblog/theme/images/share-facebook.png" alt="فیس‌بوک" />
    </a>
  </span>
</div></section>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'geekylife';
    var disqus_config = function () { this.language = "fa"; };
    var disqus_title = "تبدیل ایمیج به مخزن محلی";
    var disqus_identifier = "tbdyl-ymyj-bh-mkhzn-mhly";

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
  لطفاً برای مشاهده‌ی
  <a href="https://disqus.com/?ref_noscript" rel="nofollow">دیدگاه‌ها</a>
    ، جاوا اسکریپت را فعال کنید. قدرت گرفته از Disqus</noscript>    </div>
<footer class="site-footer">
  <div class="warpper">
    <h2 class="footer-heading">زندگی خوره‌ای</h2>
    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li class="rss-subscribe">مشترک <a href="https://mamins1376.github.io/weblog/rss.xml">خوراک خبری</a> شوید!</li>
          <li><a href="mailto:mamins1376@gmail.com">mamins1376@gmail.com</a></li>
        </ul>
      </div>
      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          <li>
            <a href="https://github.com/mamins1376">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>
              <span class="username">گیت‌هاب</span>
            </a>
          </li>

          <li>
            <a href="http://telegram.me/mamins1376">
              <span class="icon">
                <img src='https://upload.wikimedia.org/wikipedia/commons/8/82/Telegram_logo.svg' />
              </span>
              <span class="username">تلگرام</span>
            </a>
          </li>



          <li>
            <a href="https://twitter.com/mamins1376">
              <span class="icon">
                <img src='https://upload.wikimedia.org/wikipedia/en/9/9f/Twitter_bird_logo_2012.svg' />
              </span>

              <span class="username">توئیتر</span>
            </a>
          </li>
        </ul>
      </div>
      <div class="footer-col  footer-col-3">
        <p class="text">آموزش، نقد و بررسی، معرفی و ...</p>
        <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.fa"><img alt="مجوز کریتیو کامنز" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a>
      </div>
    </div>
  </div>
</footer>  </div>
</body>
</html>